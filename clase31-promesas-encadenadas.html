<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        const API_URL = 'https://swapi.dev/api/';
        const PEOPLE_URL = 'people/:id';
        
        // const lukeUrl = `${API_URL}${PEOPLE_URL.replace(':id',1)}`;
        const opts = { crossDomain: true};

        // const onPeopleResponse = 

        function obtenerPersonaje(id) {
            return new Promise((resolve,reject) => {
                const url = `${API_URL}${PEOPLE_URL.replace(':id',id)}`;
                $
                .get(url, opts, function (data) {
                    resolve(data)
                    })
                .fail(() => reject(id))
            })

            // $
            //     .get(url, opts, callback)
            //     .fail( () => {
            //     console.log(`Sucedio un error. No se pudo obtener el personaje ${id}`);
            // })         
        }

        function onError(id) {
            console.log(`SucediÃ³ un error al obtener el personaje ${id}`);
        }

        obtenerPersonaje(1)
        .then( (personaje1) => {
            console.log(`Hola yo soy ${personaje1.name}`);
            return obtenerPersonaje(2);
        })
        .then(personaje2 => {
            console.log(`Hola yo soy ${personaje2.name}`);
            return obtenerPersonaje(3);
        })
        .then(personaje3 => {
            console.log(`Hola yo soy ${personaje3.name}`);
            return obtenerPersonaje(4);
        })
        .then(personaje4 => {
            console.log(`Hola yo soy ${personaje4.name}`);
            return obtenerPersonaje(5);
        })
        .then(personaje5 => {
            console.log(`Hola yo soy ${personaje5.name}`);
            return obtenerPersonaje(6);
        })
        .then(personaje6 => {
            console.log(`Hola yo soy ${personaje6.name}`);
            return obtenerPersonaje(7);
        })
        .then(personaje7 => {
            console.log(`Hola yo soy ${personaje7.name}`);
            return obtenerPersonaje(8);
        })
        .then(personaje8 => {
            console.log(`Hola yo soy ${personaje8.name}`);
            return obtenerPersonaje(9);
        })
        .then(personaje9 => {
            console.log(`Hola yo soy ${personaje9.name}`);
            return obtenerPersonaje(10);
        })
        .then(personaje10 => {
            console.log(`Hola yo soy ${personaje10.name}`);
            return obtenerPersonaje(5);
        })
        .catch(onError)

        // obtenerPersonaje(1,function (personaje) {
        //     console.log(`Hola yo soy ${personaje.name}`);
        // });
    </script>
</body>
</html>